(function(){function h(c){var a=c.width||300,e=document.getElementById(c.id||"canvas"),b=document.createElement("canvas");e.appendChild(b);b.setAttribute("width",a);b.setAttribute("height",a);this.ctx=b.getContext("2d");this.radius=b.height/2;this.ctx.translate(this.radius,this.radius);this.radius*=.75;this.width=a;this.name=c.name;this.index=c.index;this.value=c.value||0;this.maxValue=c.maxValue||10;this.scale_warning=c.scaleRange&&c.scaleRange.warning||.7*this.maxValue;this.scale_danger=c.scaleRange&&
c.scaleRange.danger||.9*this.maxValue;this.scaleInside=c.scaleInside||!1;this.color_background=c.colors&&c.colors.background||"#fff";this.color_texts=c.colors&&c.colors.texts||"#000";this.color_hands=c.colors&&c.colors.hands||"#1e98e4";this.color_base=c.colors&&c.colors.base||"#666";this.color_warning=c.colors&&c.colors.warning||"#fa0";this.color_danger=c.colors&&c.colors.danger||"#f00";this.drawGauge(this.value)}h.prototype.drawGauge=function(c){var a=this.ctx,e=this.radius,b=this.maxValue;a.fillStyle=
    this.color_background;a.fillRect(-this.width/2,-this.width/2,this.width,this.width);var f=.75*Math.PI+1.5*this.scale_warning*Math.PI/b,g=.75*Math.PI+1.5*this.scale_danger*Math.PI/b;a.lineWidth=4;a.beginPath();a.arc(0,0,e,.75*Math.PI,f);a.strokeStyle=this.color_base;a.stroke();a.beginPath();a.arc(0,0,e,f,g);a.strokeStyle=this.color_warning;a.stroke();a.beginPath();a.arc(0,0,e,g,.25*Math.PI);a.strokeStyle=this.color_danger;a.stroke();a.beginPath();a.fillStyle=this.color_texts;for(var g=this.scaleInside?
    -1:1,d=0;d<10*b+1;d++)f=.25*Math.PI+1.5*d*Math.PI/(10*b),a.rotate(f),100>b&&0==d%10||100<=b&&200>b&&0==d%100||200<=b&&500>b&&0==d%500||500<=b&&0==d%1E3?a.fillRect(0,e*(1+.07*g),1,5*g):(20>=b||20<=b&&50>b&&0==d%2||50<=b&&100>b&&0==d%5||100<=b&&200>b&&0==d%10||200<=b&&500>b&&0==d%100||500<=b&&2E3>=b&&0==d%200)&&a.fillRect(0,e*(1+.08*g),1,1),a.rotate(-f);var h=e*(1+.2*g);a.font=.1*e+"px arial";a.textBaseline="middle";a.textAlign="center";for(d=0;d<b+1;d++)if(f=1.25*Math.PI+1.5*d*Math.PI/b,20>=b||20<=
    b&&50>b&&0==d%2||50<=b&&100>b&&0==d%5||100<=b&&200>b&&0==d%10||200<=b&&500>b&&0==d%50||500<=b&&1E3>=b&&0==d%100||1E3<b&&0==d||1E3<b&&d==b)a.rotate(f),a.translate(0,-h),a.rotate(-f),a.fillText(d.toString(),0,0),a.rotate(f),a.translate(0,h),a.rotate(-f);this.index&&a.fillText(this.index,0,.5*-e);this.name&&(a.font=.15*e+"px arial",a.fillText(this.name,0,e));parseFloat(c)||(c=0);c=1.5*(0>c?0:c>b?b:c)*Math.PI/b;c=1.25*Math.PI+c;a.fillStyle=this.color_hands;a.beginPath();a.rotate(c);a.moveTo(0,0);a.lineTo(.03*
e,0);a.lineTo(0,-e*(1+.1*g));a.lineTo(.03*-e,0);a.rotate(-c);a.fill();a.beginPath();a.arc(0,0,.06*e,0,2*Math.PI);a.fill()};h.prototype.set=function(c){parseFloat(c)&&(c=(0>c?0:1<c?1:c)*this.maxValue,this.drawGauge(c))};h.prototype.setValue=function(c){this.drawGauge(c)};window.Gauge=function(c){return new h(c)}})(this);